import com.algoTrader.service.LookupService;
import com.algoTrader.service.OrderService;
import com.algoTrader.service.PositionService;
import com.espertech.esper.client.EPAdministrator;
import com.espertech.esper.client.EPServiceProvider;
import com.espertech.esper.client.EPServiceProviderManager;
import com.espertech.esper.client.EPStatement;
import com.espertech.esper.client.EventBean;
import com.espertech.esper.client.UpdateListener;


public class MaxServiceImpl extends MaxServiceBase {

	public MaxServiceImpl(PositionService positionService, LookupService lookupService, OrderService orderService) {
		super(positionService,lookupService, orderService);
		logger.debug("Init MaxImpl");
		
		 talib_init("macd1","macd", "12", "26","9", "EU0009652759", "close" );
		
	}
	
	
   @Override
	public void onData()
	{
	   
	   double macd1 = talib_data("macd1", "macdhist");
	   logger.debug("macd1 = " + macd1);
	   if(macd1>0)
	   {
		   
		   order("EUR.USD", 10);
	   }
	   else
		   order("EUR.USD", -10);
	  
	}
	
   @Override	
	public void initialize()
	{
	   data.put("AAPL", null);
	   data.put("GOOG", null);
	   data.put("YHOO", null);
	  
	}
	
}